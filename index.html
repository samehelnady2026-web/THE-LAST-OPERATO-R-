<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BLOCKSAM v2.2 - OPERATOR EDITION</title>
    <style>
        :root { --neon: #00f2ff; --gold: #ffd700; --green: #2ecc71; --orange: #ff6600; --bg: #f0f2f5; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: sans-serif; touch-action: none; }

        /* HUD - Ø§Ù„Ø¨Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        #ui-header { position: absolute; top: 10px; width: 95%; left: 50%; transform: translateX(-50%); display: none; justify-content: space-between; z-index: 1000; align-items: center; }
        .glass-stat { background: #1a1a1a; padding: 6px 12px; border-radius: 15px; color: white; border: 2px solid var(--neon); box-shadow: 0 0 10px var(--neon); display: flex; align-items: center; gap: 5px; font-weight: bold; font-size: 13px; }
        .vip-glow { border-color: var(--gold) !important; box-shadow: 0 0 15px var(--gold) !important; }

        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… */
        .overlay { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 6000; background: rgba(255,255,255,0.96); }
        .menu-box { background: white; padding: 20px; border-radius: 30px; border: 1px solid #ddd; text-align: center; width: 88%; max-width: 360px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .btn { width: 100%; padding: 12px; margin: 5px 0; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; color: white; background: #333; font-size: 14px; }

        /* Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø¯Ù…Ø¬ (Ø³ØªØ§ÙŠÙ„ v1.5) */
        .shop-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 10px; background: #f9f9f9; border-radius: 20px; max-height: 180px; overflow-y: auto; margin: 10px 0; }
        .skin-item { background: white; height: 50px; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 20px; border: 2px solid #eee; position: relative; }
        .skin-item.active { border-color: var(--gold); background: #fffce0; }
        .price-tag { font-size: 7px; font-weight: bold; position: absolute; bottom: 2px; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø£ÙˆØ¨Ø±Ø§ÙŠØªØ± VIP */
        .operator-panel { margin-top: 10px; padding: 12px; border: 2px solid var(--green); border-radius: 20px; background: #f0fff4; }
        .btn-call { background: var(--orange); margin-bottom: 5px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }
        
        input { width: 65%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; text-align: center; font-size: 12px; }
    </style>
</head>
<body>

    <div id="main-menu" class="overlay">
        <h1 style="font-size: 2.8em; margin: 0;">BLOCK<span style="color:var(--neon)">SAM</span></h1>
        <p style="font-size: 12px; margin-bottom: 20px;">OPERATOR v2.2 | ðŸŒ™</p>
        <div class="menu-box">
            <button class="btn" style="background:var(--gold); color:#000" onclick="startMode('single')">SOLO MODE</button>
            <button class="btn" style="background:var(--neon); color:#000" onclick="startMode('ai')">VERSUS AI ðŸ¤–</button>
            <button class="btn" onclick="openShop()">MARKET & VIP ðŸ›’</button>
        </div>
    </div>

    <div id="shop-screen" class="overlay" style="display:none">
        <div class="menu-box">
            <h2 style="margin:0">MARKET</h2>
            <div style="display:flex; justify-content:center; gap:10px; margin: 5px 0; font-weight: bold;">
                <span style="color:#b8860b">ðŸ’° <span id="shop-coins">0</span></span>
                <span style="color:var(--green)">ðŸ’µ <span id="shop-cash">0</span></span>
            </div>
            
            <div class="shop-grid" id="shop-grid"></div>

            <div class="operator-panel">
                <p style="font-size: 10px; font-weight: bold; color: var(--orange); margin-bottom: 8px;">VIP RECHARGE (Orange Money)</p>
                <button class="btn btn-call" onclick="window.location.href='tel:01287837118'">ðŸ“ž CALL: 01287837118</button>
                <div style="display: flex; gap: 5px;">
                    <input type="text" id="promo-input" placeholder="ENTER CODE">
                    <button class="btn" style="width: 30%; margin:0; background:var(--green)" onclick="checkPromo()">OK</button>
                </div>
            </div>
            <button class="btn" style="margin-top:10px; background:#eee; color:#333" onclick="closeShop()">CLOSE</button>
        </div>
    </div>

    <div id="ui-header">
        <div style="display:flex; gap:8px;">
            <div id="p1-box" class="glass-stat"><span id="p1-icon-ui">ðŸ¥·</span> <span id="p1-score">0</span></div>
            <div class="glass-stat" style="border-color:var(--green)">ðŸ’µ <span id="p1-cash">0</span></div>
        </div>
        <div class="glass-stat" style="border-color:#fff">LVL <span id="level-ui">1</span></div>
        <div id="p2-card" class="glass-stat" style="border-color:#f0f; display:none">ðŸ¤– <span id="p2-score">0</span></div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;

    let p1 = { x:100, y:100, coins:0, cash:0, icon:'ðŸ¥·', tx:100, ty:100, isVip: false };
    let p2 = { x:-500, y:-500, score:0, icon:'ðŸ¤–', active: false };
    let items = [], gameActive = false, level = 1;

    const skins = ['ðŸ¥·','ðŸ¤–','ðŸ‘½','ðŸ¦Š','ðŸ¦','ðŸ¯','ðŸ¼','ðŸ²','ðŸ‘º','ðŸ¤¡','ðŸ’€','ðŸ‘»','ðŸ§›','ðŸ§Ÿ','ðŸ§™','ðŸ¤´','ðŸ‘¸','ðŸ¦„','ðŸ¦–','ðŸ¦‚','ðŸ¦','ðŸ¦“','ðŸ˜','ðŸ«','ðŸ¦’','ðŸ¦…','ðŸ¦ˆ','ðŸ™','ðŸ','ðŸ¦‹'];
    let owned = ['ðŸ¥·'];

    function loadData() {
        const d = JSON.parse(localStorage.getItem('BLOCKSAM_V22') || '{}');
        Object.assign(p1, d); owned = d.owned || ['ðŸ¥·']; updateUI();
    }
    function saveData() { localStorage.setItem('BLOCKSAM_V22', JSON.stringify({...p1, owned})); }

    function updateUI() {
        document.getElementById('p1-icon-ui').innerText = (p1.isVip ? 'ðŸ‘‘ ' : '') + p1.icon;
        if(p1.isVip) document.getElementById('p1-box').classList.add('vip-glow');
    }

    function openShop() {
        document.getElementById('shop-screen').style.display = 'flex';
        document.getElementById('shop-coins').innerText = p1.coins;
        document.getElementById('shop-cash').innerText = p1.cash;
        const grid = document.getElementById('shop-grid'); grid.innerHTML = '';
        skins.forEach((s, i) => {
            let isCash = i >= 10, price = isCash ? (i-9)*10 : i*1000;
            grid.innerHTML += `<div class="skin-item ${p1.icon===s?'active':''}" onclick="buy('${s}',${price},${isCash})">
                ${s} <span class="price-tag">${owned.includes(s)?'OWNED':(isCash?'ðŸ’µ':'ðŸ’°')+price}</span>
            </div>`;
        });
    }

    window.buy = (s, pr, isCash) => {
        if(owned.includes(s)) p1.icon = s;
        else if((!isCash && p1.coins >= pr) || (isCash && p1.cash >= pr)) {
            if(isCash) p1.cash -= pr; else p1.coins -= pr;
            owned.push(s); p1.icon = s;
        } else { alert("Contact Operator to Recharge!"); }
        saveData(); updateUI(); openShop();
    };

    window.checkPromo = () => {
        if(document.getElementById('promo-input').value.toUpperCase() === 'SAM2026') {
            p1.isVip = true; p1.cash += 100; saveData(); updateUI(); openShop(); alert('VIP ACTIVE! ðŸ‘‘');
        }
    };

    function startMode(m) {
        gameActive = true; document.getElementById('main-menu').style.display = 'none';
        document.getElementById('ui-header').style.display = 'flex';
        if(m === 'ai') { p2.active = true; p2.x = 200; document.getElementById('p2-card').style.display = 'flex'; }
        update();
    }

    function update() {
        if(!gameActive) return;
        ctx.fillStyle = '#f0f2f5'; ctx.fillRect(0,0,canvas.width,canvas.height);
        
        items.forEach(it => {
            if(!it.active) return;
            ctx.font = "24px serif"; ctx.fillText(it.type === 'cash' ? 'ðŸ’µ' : 'ðŸ’°', it.x, it.y);
            if(Math.hypot(p1.x-it.x, p1.y-it.y)<35) { it.active = false; if(it.type==='cash') p1.cash++; else p1.coins+=500; saveData(); }
            if(p2.active && Math.hypot(p2.x-it.x, p2.y-it.y)<35) { it.active = false; p2.score+=500; }
        });

        p1.x += (p1.tx - p1.x) * 0.15; p1.y += (p1.ty - p1.y) * 0.15;
        ctx.font = "35px serif"; ctx.textAlign = "center";
        ctx.fillText(p1.icon, p1.x, p1.y);

        if(p2.active) {
            let t = items.find(i=>i.active) || {x:canvas.width/2, y:canvas.height/2};
            p2.x += (t.x-p2.x)*0.05; p2.y += (t.y-p2.y)*0.05;
            ctx.fillText(p2.icon, p2.x, p2.y);
            document.getElementById('p2-score').innerText = p2.score;
        }
        
        document.getElementById('p1-score').innerText = p1.coins;
        document.getElementById('p1-cash').innerText = p1.cash;
        requestAnimationFrame(update);
    }

    canvas.addEventListener('touchstart', (e) => { p1.tx = e.touches[0].clientX; p1.ty = e.touches[0].clientY; });
    setInterval(() => { if(gameActive) items.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, type:Math.random()<0.1?'cash':'coin', active:true}); }, 2000);
    function closeShop() { document.getElementById('shop-screen').style.display = 'none'; }
    window.onload = loadData;
</script>
</body>
</html>
